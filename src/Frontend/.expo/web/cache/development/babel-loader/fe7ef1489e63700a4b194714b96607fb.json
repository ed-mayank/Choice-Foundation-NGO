{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Picker from \"react-native-web/dist/exports/Picker\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, useParams, useLocation } from \"react-router-dom\";\nimport axios from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction GetP_id() {\n  var c = 0;\n  var index = 0;\n  var path = location.pathname;\n\n  for (var i = 0; i < path.length; i++) {\n    if (path.charAt(i) == '/') {\n      c++;\n    }\n\n    if (c == 3) {\n      index = i;\n      break;\n    }\n\n    if (c == 2) {\n      index = path.length;\n    }\n  }\n\n  return path.substring(12, index);\n}\n\nvar today;\nvar D_id = \"\";\n\nfunction formatDate(a) {\n  if (a < 9) {\n    return \"0\" + a;\n  } else {\n    return a;\n  }\n}\n\nvar OI = function OI() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      MAP = _useState2[0],\n      setMAP = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      fio2 = _useState4[0],\n      setFio2 = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pao2 = _useState6[0],\n      setPao2 = _useState6[1];\n\n  var _useState7 = useState(1),\n      _useState8 = _slicedToArray(_useState7, 2),\n      c = _useState8[0],\n      setC = _useState8[1];\n\n  var location = useLocation();\n  var score = 0;\n  var flag = 0;\n  var pf = 0;\n  var pfSevere = \"\";\n  var oiSevere = \"\";\n\n  if (Number(MAP) > 0 && Number(fio2) > 0 && Number(pao2) > 0) {\n    flag = 1;\n    pf = Number(pao2) / Number(fio2);\n\n    if (pf > 200 && pf <= 300) {\n      pfSevere = \"Acute Lung Injury (ALI) with Mild Acute Respiratory Distress syndrome (ARDS)\";\n    } else if (pf > 100 && pf <= 200) {\n      pfSevere = \"Moderate Acute Respiratory Distress syndrome (ARDS)\";\n    } else if (pf <= 100) {\n      pfSevere = \"Severe Acute Respiratory Distress syndrome (ARDS)\";\n    }\n\n    score = Number(MAP) / pf;\n\n    if (score < 4) {\n      oiSevere = \"Severity: At risk for pediatric ARDS\";\n    } else if (score >= 4 && score < 8) {\n      oiSevere = \"Severity: Mild pediatric ARDS\";\n    } else if (score >= 8 && score < 16) {\n      oiSevere = \"Severity: Moderate pediatric ARDS\";\n    } else if (score >= 16) {\n      oiSevere = \"Severity: Severe pediatric ARDS\";\n    }\n  }\n\n  var onClickAdd = function onClickAdd(event) {\n    if (flag == 1) {\n      today = new Date();\n      setC(0);\n      var newOI = {\n        \"P_id\": GetP_id(),\n        \"a\": MAP,\n        \"b\": fio2,\n        \"c\": pao2,\n        \"d\": pf,\n        \"e\": pfSevere,\n        \"f\": score,\n        \"g\": oiSevere,\n        \"h\": D_id,\n        \"i\": today.getDate() + \"-\" + today.getMonth() + \"-\" + today.getFullYear() + \"   at  \" + today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds()\n      };\n      axios.post(\"http://localhost:4000/add/OI\", newOI).then(function (response) {\n        if (response.data != null) {\n          alert(\"Added\");\n        } else {\n          alert(\"Unable to add!\");\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    } else {\n      alert(\"Fill all the details\");\n    }\n  };\n\n  function GetAssessment() {\n    axios.get(\"http://localhost:4000/get/OI/\" + GetP_id()).then(function (response) {\n      if (response.data != null && response.data.length == 1) {\n        console.log(response.data);\n        setMAP(response.data[0].MAP);\n        setFio2(response.data[0].FIO2);\n        setPao2(response.data[0].PACO2);\n      } else {\n        alert(\"Unable to get previous data!\");\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  useEffect(function () {\n    if (localStorage.getItem('user_data') == null) {\n      alert(\"Unauthorised Access\");\n      navigate(\"/\");\n    }\n\n    GetAssessment();\n  }, []);\n  return _jsxs(SafeAreaView, {\n    children: [_jsx(Text, {\n      style: styles.prism,\n      children: \"Oxygenation Index(OI)\"\n    }), _jsxs(View, {\n      style: [styles.container1],\n      children: [_jsxs(View, {\n        style: styles.dropContainer,\n        children: [_jsx(Text, {\n          style: styles.dropdownContent,\n          children: \"MAP: \"\n        }), _jsx(TextInput, {\n          style: styles.input,\n          placeholder: \"MAP\",\n          onChangeText: setMAP,\n          value: MAP\n        })]\n      }), _jsxs(View, {\n        style: styles.dropContainer,\n        children: [_jsx(Text, {\n          style: styles.dropdownContent,\n          children: \"FiO2: \"\n        }), _jsx(TextInput, {\n          style: styles.input,\n          placeholder: \"FiO2\",\n          onChangeText: setFio2,\n          value: fio2\n        })]\n      }), _jsxs(View, {\n        style: styles.dropContainer,\n        children: [_jsx(Text, {\n          style: styles.dropdownContent,\n          children: \"PaO2: \"\n        }), _jsx(TextInput, {\n          style: styles.input,\n          placeholder: \"PaO2\",\n          onChangeText: setPao2,\n          value: pao2\n        })]\n      })]\n    }), flag == 1 && _jsx(View, {\n      style: [styles.container2],\n      children: _jsxs(View, {\n        children: [_jsxs(Text, {\n          style: styles.assessment,\n          children: [\"pf Ratio = \", pf]\n        }), pf > 200 && pf <= 300 && _jsx(Text, {\n          style: styles.assessment,\n          children: \"Acute Lung Injury (ALI) with Mild Acute Respiratory Distress syndrome (ARDS)\"\n        }), pf > 100 && pf <= 200 && _jsx(Text, {\n          style: styles.assessment,\n          children: \"Moderate Acute Respiratory Distress syndrome (ARDS)\"\n        }), pf <= 100 && _jsx(Text, {\n          style: styles.assessment,\n          children: \"Severe Acute Respiratory Distress syndrome (ARDS)\"\n        }), _jsxs(Text, {\n          style: styles.assessment,\n          children: [\"OI = \", score]\n        }), score < 4 && _jsx(Text, {\n          style: styles.assessment,\n          children: \"Severity: At risk for pediatric ARDS\"\n        }), score >= 4 && score < 8 && _jsx(Text, {\n          style: styles.assessment,\n          children: \"Severity: Mild pediatric ARDS\"\n        }), score >= 8 && score < 16 && _jsx(Text, {\n          style: styles.assessment,\n          children: \"Severity: Moderate pediatric ARDS\"\n        }), score >= 16 && _jsx(Text, {\n          style: styles.assessment,\n          children: \"Severity: severe pediatric ARDS\"\n        })]\n      })\n    }), c == 1 && _jsx(Pressable, {\n      style: styles.submit,\n      children: _jsx(Button, {\n        title: \"Add\",\n        onPress: onClickAdd,\n        children: \"Add\"\n      })\n    })]\n  });\n};\n\nexport default OI;\nvar styles = StyleSheet.create({\n  prism: {\n    fontSize: 50,\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  assessment: {\n    marginTop: 20,\n    fontSize: 30,\n    fontWeight: \"bold\"\n  },\n  dropContainer: {\n    flexDirection: \"row\",\n    marginBottom: 20,\n    marginTop: 10\n  },\n  dropdownContent: {\n    fontSize: 20,\n    marginTop: 10\n  },\n  input: {\n    height: 40,\n    margin: 12,\n    borderWidth: 1,\n    padding: 10,\n    width: 200\n  },\n  text: {\n    fontWeight: \"bold\"\n  },\n  container1: {\n    backgroundColor: \"#f0ffff\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5\n  },\n  container2: {\n    backgroundColor: \"#fffacd\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5\n  },\n  container3: {\n    backgroundColor: \"#ffb6c1\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5\n  },\n  container4: {\n    backgroundColor: \"#f5f5dc\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5\n  },\n  container5: {\n    backgroundColor: \"#dda0dd\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5\n  },\n  subscore: {\n    fontWeight: \"bold\",\n    borderWidth: 1,\n    backgroundColor: \"#fff\",\n    margin: 10,\n    padding: 4,\n    fontSize: 20\n  },\n  submit: {\n    borderWidth: 2,\n    backgroundColor: \"#56BF9C\",\n    margin: 10,\n    padding: 7,\n    width: 90\n  }\n});","map":{"version":3,"sources":["/home/mayank/DASSProject/DASS2K22-Team-48/src/Frontend/components/Assessment/OI.js"],"names":["React","useState","useEffect","useNavigate","useParams","useLocation","axios","GetP_id","c","index","path","location","pathname","i","length","charAt","substring","today","D_id","formatDate","a","OI","MAP","setMAP","fio2","setFio2","pao2","setPao2","setC","score","flag","pf","pfSevere","oiSevere","Number","onClickAdd","event","Date","newOI","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","post","then","response","data","alert","catch","error","console","log","GetAssessment","get","FIO2","PACO2","localStorage","getItem","navigate","styles","prism","container1","dropContainer","dropdownContent","input","container2","assessment","submit","StyleSheet","create","fontSize","fontWeight","textAlign","marginTop","flexDirection","marginBottom","height","margin","borderWidth","padding","width","text","backgroundColor","paddingLeft","container3","container4","container5","subscore"],"mappings":"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","sourcesContent":["import { StyleSheet, Text, View, SafeAreaView, Picker, TextInput, Button, Pressable } from \"react-native\";\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, useParams, useLocation } from \"react-router-dom\";\nimport axios from 'axios';\nfunction GetP_id() {\n\n  var c = 0;\n  var index = 0\n  var path = location.pathname\n  for (var i = 0; i < path.length; i++) {\n    if (path.charAt(i) == '/') {\n      c++;\n    }\n    if (c == 3) {\n      index = i\n      break;\n    }\n    if (c == 2) {\n      index = path.length;\n    }\n  }\n  return path.substring(12, index)\n}\n\nvar today;\nvar D_id = \"\"\n\nfunction formatDate(a){\n  if(a<9){\n    return \"0\"+a\n  }else{\n    return a;\n  }\n}\n\nconst OI = () => {\n  const [MAP, setMAP] = useState(\"\");\n  const [fio2, setFio2] = useState(\"\");\n  const [pao2, setPao2] = useState(\"\");\n\n  const [c, setC] = useState(1)\n  const location = useLocation()\n  let score = 0;\n  let flag = 0;\n  let pf = 0;\n  let pfSevere = \"\";\n  let oiSevere = \"\";\n  if (Number(MAP) > 0 && Number(fio2) > 0 && Number(pao2) > 0) {\n    flag = 1;\n    pf = Number(pao2) / Number(fio2);\n    if (pf > 200 && pf <= 300) {\n      pfSevere = \"Acute Lung Injury (ALI) with Mild Acute Respiratory Distress syndrome (ARDS)\"\n    }\n    else if (pf > 100 && pf <= 200) {\n      pfSevere = \"Moderate Acute Respiratory Distress syndrome (ARDS)\"\n    }\n    else if (pf <= 100) {\n      pfSevere = \"Severe Acute Respiratory Distress syndrome (ARDS)\"\n    }\n    score = Number(MAP) / pf;\n    if (score < 4) {\n      oiSevere = \"Severity: At risk for pediatric ARDS\"\n    }\n    else if (score >= 4 && score < 8) {\n      oiSevere = \"Severity: Mild pediatric ARDS\"\n    }\n    else if (score >= 8 && score < 16) {\n      oiSevere = \"Severity: Moderate pediatric ARDS\"\n    }\n    else if (score >= 16) {\n      oiSevere = \"Severity: Severe pediatric ARDS\"\n    }\n  }\n\n  const onClickAdd = (event) => {\n    if (flag == 1) {\n      today = new Date()\n      setC(0);\n      const newOI = {\n        \"P_id\": GetP_id(),\n        \"a\": MAP,\n        \"b\": fio2,\n        \"c\": pao2,\n        \"d\": pf,\n        \"e\": pfSevere,\n        \"f\": score,\n        \"g\": oiSevere,\n        \"h\": D_id,\n        \"i\": today.getDate()+\"-\"+today.getMonth()+\"-\"+today.getFullYear()+\"   at  \"+today.getHours()+\":\"+today.getMinutes()+\":\"+today.getSeconds()\n      }\n\n      // console.log(newCrs)\n      axios\n        .post(\"http://localhost:4000/add/OI\", newOI)\n        .then((response) => {\n          if ((response.data) != null) {\n            alert(\"Added\");\n          }\n          else {\n            alert(\"Unable to add!\");\n\n          }\n          // console.log(response.data);\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n    else {\n      alert(\"Fill all the details\");\n    }\n  }\n  function GetAssessment() {\n    axios\n      .get(\"http://localhost:4000/get/OI/\" + GetP_id())\n      .then((response) => {\n        if ((response.data) != null && response.data.length == 1) {\n          console.log(response.data)\n          setMAP(response.data[0].MAP)\n          setFio2(response.data[0].FIO2)\n          setPao2(response.data[0].PACO2)\n        }\n        else {\n          alert(\"Unable to get previous data!\");\n\n        }\n        // console.log(response.data);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n\n  }\n  useEffect(() => {\n    // console.log(\"api\")\n    if (localStorage.getItem('user_data') == null) {\n      alert(\"Unauthorised Access\")\n      navigate(\"/\")\n    }\n    GetAssessment();\n  }, []);\n  return (\n    <SafeAreaView>\n      <Text style={styles.prism}>Oxygenation Index(OI)</Text>\n      <View style={[styles.container1]}>\n        <View style={styles.dropContainer}>\n          <Text style={styles.dropdownContent}>MAP: </Text>\n          <TextInput\n            style={styles.input}\n            placeholder=\"MAP\"\n            onChangeText={setMAP}\n            value={MAP}\n          />\n        </View>\n        <View style={styles.dropContainer}>\n          <Text style={styles.dropdownContent}>FiO2: </Text>\n          <TextInput\n            style={styles.input}\n            placeholder=\"FiO2\"\n            onChangeText={setFio2}\n            value={fio2}\n          />\n        </View>\n        <View style={styles.dropContainer}>\n          <Text style={styles.dropdownContent}>PaO2: </Text>\n          <TextInput\n            style={styles.input}\n            placeholder=\"PaO2\"\n            onChangeText={setPao2}\n            value={pao2}\n          />\n        </View>\n      </View>\n      {flag == 1 && (\n        <View style={[styles.container2]}>\n          <View>\n            <Text style={styles.assessment}>\n              pf Ratio = {pf}\n            </Text>\n            {pf > 200 && pf <= 300 &&\n              <Text style={styles.assessment}>\n                Acute Lung Injury (ALI) with Mild Acute Respiratory Distress syndrome (ARDS)\n              </Text>\n            }\n            {pf > 100 && pf <= 200 &&\n              <Text style={styles.assessment}>\n                Moderate Acute Respiratory Distress syndrome (ARDS)\n              </Text>\n            }\n            {pf <= 100 &&\n              <Text style={styles.assessment}>\n                Severe Acute Respiratory Distress syndrome (ARDS)\n              </Text>\n            }\n            <Text style={styles.assessment}>\n              OI = {score}\n            </Text>\n            {score < 4 &&\n              <Text style={styles.assessment}>\n                Severity: At risk for pediatric ARDS\n              </Text>\n            }\n            {score >= 4 && score < 8 &&\n              <Text style={styles.assessment}>\n                Severity: Mild pediatric ARDS\n              </Text>\n            }\n            {score >= 8 && score < 16 &&\n              <Text style={styles.assessment}>\n                Severity: Moderate pediatric ARDS\n              </Text>\n            }\n            {score >= 16 &&\n              <Text style={styles.assessment}>\n                Severity: severe pediatric ARDS\n              </Text>\n            }\n          </View>\n        </View>\n      )}\n      {c == 1 && (\n        <Pressable style={styles.submit}>\n          <Button\n            title=\"Add\"\n\n            onPress={onClickAdd}\n          >\n            Add\n          </Button>\n        </Pressable>)}\n    </SafeAreaView>\n  );\n};\nexport default OI;\n\nconst styles = StyleSheet.create({\n  prism: {\n    fontSize: 50,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n  },\n  assessment: {\n    marginTop: 20,\n    fontSize: 30,\n    fontWeight: \"bold\",\n  },\n  dropContainer: {\n    flexDirection: \"row\",\n    marginBottom: 20,\n    marginTop: 10,\n  },\n  dropdownContent: {\n    fontSize: 20,\n    marginTop: 10,\n  },\n  input: {\n    height: 40,\n    margin: 12,\n    borderWidth: 1,\n    padding: 10,\n    width: 200,\n  },\n  text: {\n    fontWeight: \"bold\",\n  },\n  container1: {\n    backgroundColor: \"#f0ffff\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  container2: {\n    backgroundColor: \"#fffacd\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  container3: {\n    backgroundColor: \"#ffb6c1\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  container4: {\n    backgroundColor: \"#f5f5dc\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  container5: {\n    backgroundColor: \"#dda0dd\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  subscore: {\n    fontWeight: \"bold\",\n    borderWidth: 1,\n    backgroundColor: \"#fff\",\n    margin: 10,\n    padding: 4,\n    fontSize: 20,\n  },\n  submit: {\n    borderWidth: 2,\n    backgroundColor: \"#56BF9C\",\n    margin: 10,\n    padding: 7,\n    width: 90,\n  }\n});\n"]},"metadata":{},"sourceType":"module"}
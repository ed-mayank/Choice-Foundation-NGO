{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import Picker from\"react-native-web/dist/exports/Picker\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Button from\"react-native-web/dist/exports/Button\";import Pressable from\"react-native-web/dist/exports/Pressable\";import React,{useState,useEffect}from\"react\";import{useNavigate,useParams,useLocation}from\"react-router-dom\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GetP_id(){var c=0;var index=0;var path=location.pathname;for(var i=0;i<path.length;i++){if(path.charAt(i)=='/'){c++;}if(c==3){index=i;break;}if(c==2){index=path.length;}}return path.substring(12,index);}var today;var D_id=\"\";if(localStorage.getItem('user_data')!=null)D_id=JSON.parse(localStorage.getItem('user_data')).username;function formatDate(a){if(a<9){return\"0\"+a;}else{return a;}}var OI=function OI(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),MAP=_useState2[0],setMAP=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),fio2=_useState4[0],setFio2=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),pao2=_useState6[0],setPao2=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),c=_useState8[0],setC=_useState8[1];var location=useLocation();var score=0;var flag=0;var pf=0;var pfSevere=\"\";var oiSevere=\"\";if(Number(MAP)>0&&Number(fio2)>0&&Number(pao2)>0){flag=1;pf=Number(pao2)/Number(fio2);if(pf>200&&pf<=300){pfSevere=\"Acute Lung Injury (ALI) with Mild Acute Respiratory Distress syndrome (ARDS)\";}else if(pf>100&&pf<=200){pfSevere=\"Moderate Acute Respiratory Distress syndrome (ARDS)\";}else if(pf<=100){pfSevere=\"Severe Acute Respiratory Distress syndrome (ARDS)\";}score=Number(MAP)/pf;if(score<4){oiSevere=\"Severity: At risk for pediatric ARDS\";}else if(score>=4&&score<8){oiSevere=\"Severity: Mild pediatric ARDS\";}else if(score>=8&&score<16){oiSevere=\"Severity: Moderate pediatric ARDS\";}else if(score>=16){oiSevere=\"Severity: Severe pediatric ARDS\";}}var onClickAdd=function onClickAdd(event){if(flag==1){today=new Date();setC(0);var newOI={\"P_id\":GetP_id(),\"a\":MAP,\"b\":fio2,\"c\":pao2,\"d\":pf,\"e\":pfSevere,\"f\":score,\"g\":oiSevere,\"h\":D_id,\"i\":formatDate(today.getDate())+\"-\"+formatDate(today.getMonth()+1)+\"-\"+today.getFullYear()+\"   at  \"+formatDate(today.getHours())+\":\"+formatDate(today.getMinutes())+\":\"+formatDate(today.getSeconds())};axios.post(\"http://localhost:4000/add/OI\",newOI).then(function(response){if(response.data!=null){alert(\"Added\");}else{alert(\"Unable to add!\");}}).catch(function(error){console.log(error);});}else{alert(\"Fill all the details\");}};function GetAssessment(){axios.get(\"http://localhost:4000/get/OI/\"+GetP_id()).then(function(response){if(response.data!=null&&response.data.length==1){console.log(response.data);setMAP(response.data[0].MAP);setFio2(response.data[0].FIO2);setPao2(response.data[0].PACO2);}else{alert(\"Unable to get previous data!\");}}).catch(function(error){console.log(error);});}useEffect(function(){if(localStorage.getItem('user_data')==null){alert(\"Unauthorised Access\");navigate(\"/\");}GetAssessment();},[]);return _jsxs(SafeAreaView,{children:[_jsx(Text,{style:styles.prism,children:\"Oxygenation Index(OI)\"}),_jsxs(View,{style:[styles.container1],children:[_jsxs(View,{style:styles.dropContainer,children:[_jsx(Text,{style:styles.dropdownContent,children:\"MAP: \"}),_jsx(TextInput,{style:styles.input,placeholder:\"MAP\",onChangeText:setMAP,value:MAP})]}),_jsxs(View,{style:styles.dropContainer,children:[_jsx(Text,{style:styles.dropdownContent,children:\"FiO2: \"}),_jsx(TextInput,{style:styles.input,placeholder:\"FiO2\",onChangeText:setFio2,value:fio2})]}),_jsxs(View,{style:styles.dropContainer,children:[_jsx(Text,{style:styles.dropdownContent,children:\"PaO2: \"}),_jsx(TextInput,{style:styles.input,placeholder:\"PaO2\",onChangeText:setPao2,value:pao2})]})]}),flag==1&&_jsx(View,{style:[styles.container2],children:_jsxs(View,{children:[_jsxs(Text,{style:styles.assessment,children:[\"pf Ratio = \",pf]}),pf>200&&pf<=300&&_jsx(Text,{style:styles.assessment,children:\"Acute Lung Injury (ALI) with Mild Acute Respiratory Distress syndrome (ARDS)\"}),pf>100&&pf<=200&&_jsx(Text,{style:styles.assessment,children:\"Moderate Acute Respiratory Distress syndrome (ARDS)\"}),pf<=100&&_jsx(Text,{style:styles.assessment,children:\"Severe Acute Respiratory Distress syndrome (ARDS)\"}),_jsxs(Text,{style:styles.assessment,children:[\"OI = \",score]}),score<4&&_jsx(Text,{style:styles.assessment,children:\"Severity: At risk for pediatric ARDS\"}),score>=4&&score<8&&_jsx(Text,{style:styles.assessment,children:\"Severity: Mild pediatric ARDS\"}),score>=8&&score<16&&_jsx(Text,{style:styles.assessment,children:\"Severity: Moderate pediatric ARDS\"}),score>=16&&_jsx(Text,{style:styles.assessment,children:\"Severity: severe pediatric ARDS\"})]})}),c==1&&_jsx(Pressable,{style:styles.submit,children:_jsx(Button,{title:\"Add\",onPress:onClickAdd,children:\"Add\"})})]});};export default OI;var styles=StyleSheet.create({prism:{fontSize:50,fontWeight:\"bold\",textAlign:\"center\"},assessment:{marginTop:20,fontSize:30,fontWeight:\"bold\"},dropContainer:{flexDirection:\"row\",marginBottom:20,marginTop:10},dropdownContent:{fontSize:20,marginTop:10},input:{height:40,margin:12,borderWidth:1,padding:10,width:200},text:{fontWeight:\"bold\"},container1:{backgroundColor:\"#f0ffff\",paddingLeft:20,borderWidth:2,margin:5},container2:{backgroundColor:\"#fffacd\",paddingLeft:20,borderWidth:2,margin:5},container3:{backgroundColor:\"#ffb6c1\",paddingLeft:20,borderWidth:2,margin:5},container4:{backgroundColor:\"#f5f5dc\",paddingLeft:20,borderWidth:2,margin:5},container5:{backgroundColor:\"#dda0dd\",paddingLeft:20,borderWidth:2,margin:5},subscore:{fontWeight:\"bold\",borderWidth:1,backgroundColor:\"#fff\",margin:10,padding:4,fontSize:20},submit:{borderWidth:2,backgroundColor:\"#56BF9C\",margin:10,padding:7,width:90}});","map":{"version":3,"sources":["/home/mayank/DASS/DASS2K22-Team-48/src/Frontend/components/Assessment/OI.js"],"names":["React","useState","useEffect","useNavigate","useParams","useLocation","axios","GetP_id","c","index","path","location","pathname","i","length","charAt","substring","today","D_id","localStorage","getItem","JSON","parse","username","formatDate","a","OI","MAP","setMAP","fio2","setFio2","pao2","setPao2","setC","score","flag","pf","pfSevere","oiSevere","Number","onClickAdd","event","Date","newOI","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","post","then","response","data","alert","catch","error","console","log","GetAssessment","get","FIO2","PACO2","navigate","styles","prism","container1","dropContainer","dropdownContent","input","container2","assessment","submit","StyleSheet","create","fontSize","fontWeight","textAlign","marginTop","flexDirection","marginBottom","height","margin","borderWidth","padding","width","text","backgroundColor","paddingLeft","container3","container4","container5","subscore"],"mappings":"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","sourcesContent":["import { StyleSheet, Text, View, SafeAreaView, Picker, TextInput, Button, Pressable } from \"react-native\";\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, useParams, useLocation } from \"react-router-dom\";\nimport axios from 'axios';\nfunction GetP_id() {\n\n  var c = 0;\n  var index = 0\n  var path = location.pathname\n  for (var i = 0; i < path.length; i++) {\n    if (path.charAt(i) == '/') {\n      c++;\n    }\n    if (c == 3) {\n      index = i\n      break;\n    }\n    if (c == 2) {\n      index = path.length;\n    }\n  }\n  return path.substring(12, index)\n}\n\nvar today;\nvar D_id=\"\"\nif(localStorage.getItem('user_data')!=null)\n  D_id = (JSON.parse(localStorage.getItem('user_data'))).username\n\nfunction formatDate(a){\n  if(a<9){\n    return \"0\"+a\n  }else{\n    return a;\n  }\n}\n\nconst OI = () => {\n  const [MAP, setMAP] = useState(\"\");\n  const [fio2, setFio2] = useState(\"\");\n  const [pao2, setPao2] = useState(\"\");\n\n  const [c, setC] = useState(1)\n  const location = useLocation()\n  let score = 0;\n  let flag = 0;\n  let pf = 0;\n  let pfSevere = \"\";\n  let oiSevere = \"\";\n  if (Number(MAP) > 0 && Number(fio2) > 0 && Number(pao2) > 0) {\n    flag = 1;\n    pf = Number(pao2) / Number(fio2);\n    if (pf > 200 && pf <= 300) {\n      pfSevere = \"Acute Lung Injury (ALI) with Mild Acute Respiratory Distress syndrome (ARDS)\"\n    }\n    else if (pf > 100 && pf <= 200) {\n      pfSevere = \"Moderate Acute Respiratory Distress syndrome (ARDS)\"\n    }\n    else if (pf <= 100) {\n      pfSevere = \"Severe Acute Respiratory Distress syndrome (ARDS)\"\n    }\n    score = Number(MAP) / pf;\n    if (score < 4) {\n      oiSevere = \"Severity: At risk for pediatric ARDS\"\n    }\n    else if (score >= 4 && score < 8) {\n      oiSevere = \"Severity: Mild pediatric ARDS\"\n    }\n    else if (score >= 8 && score < 16) {\n      oiSevere = \"Severity: Moderate pediatric ARDS\"\n    }\n    else if (score >= 16) {\n      oiSevere = \"Severity: Severe pediatric ARDS\"\n    }\n  }\n\n  const onClickAdd = (event) => {\n    if (flag == 1) {\n      today = new Date()\n      setC(0);\n      const newOI = {\n        \"P_id\": GetP_id(),\n        \"a\": MAP,\n        \"b\": fio2,\n        \"c\": pao2,\n        \"d\": pf,\n        \"e\": pfSevere,\n        \"f\": score,\n        \"g\": oiSevere,\n        \"h\": D_id,\n        \"i\": formatDate(today.getDate())+\"-\"+formatDate(today.getMonth()+1)+\"-\"+today.getFullYear()+\"   at  \"+formatDate(today.getHours())+\":\"+formatDate(today.getMinutes())+\":\"+formatDate(today.getSeconds())\n      }\n\n      // console.log(newCrs)\n      axios\n        .post(\"http://localhost:4000/add/OI\", newOI)\n        .then((response) => {\n          if ((response.data) != null) {\n            alert(\"Added\");\n          }\n          else {\n            alert(\"Unable to add!\");\n\n          }\n          // console.log(response.data);\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n    else {\n      alert(\"Fill all the details\");\n    }\n  }\n  function GetAssessment() {\n    axios\n      .get(\"http://localhost:4000/get/OI/\" + GetP_id())\n      .then((response) => {\n        if ((response.data) != null && response.data.length == 1) {\n          console.log(response.data)\n          setMAP(response.data[0].MAP)\n          setFio2(response.data[0].FIO2)\n          setPao2(response.data[0].PACO2)\n        }\n        else {\n          alert(\"Unable to get previous data!\");\n\n        }\n        // console.log(response.data);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n\n  }\n  useEffect(() => {\n    // console.log(\"api\")\n    if (localStorage.getItem('user_data') == null) {\n      alert(\"Unauthorised Access\")\n      navigate(\"/\")\n    }\n    GetAssessment();\n  }, []);\n  return (\n    <SafeAreaView>\n      <Text style={styles.prism}>Oxygenation Index(OI)</Text>\n      <View style={[styles.container1]}>\n        <View style={styles.dropContainer}>\n          <Text style={styles.dropdownContent}>MAP: </Text>\n          <TextInput\n            style={styles.input}\n            placeholder=\"MAP\"\n            onChangeText={setMAP}\n            value={MAP}\n          />\n        </View>\n        <View style={styles.dropContainer}>\n          <Text style={styles.dropdownContent}>FiO2: </Text>\n          <TextInput\n            style={styles.input}\n            placeholder=\"FiO2\"\n            onChangeText={setFio2}\n            value={fio2}\n          />\n        </View>\n        <View style={styles.dropContainer}>\n          <Text style={styles.dropdownContent}>PaO2: </Text>\n          <TextInput\n            style={styles.input}\n            placeholder=\"PaO2\"\n            onChangeText={setPao2}\n            value={pao2}\n          />\n        </View>\n      </View>\n      {flag == 1 && (\n        <View style={[styles.container2]}>\n          <View>\n            <Text style={styles.assessment}>\n              pf Ratio = {pf}\n            </Text>\n            {pf > 200 && pf <= 300 &&\n              <Text style={styles.assessment}>\n                Acute Lung Injury (ALI) with Mild Acute Respiratory Distress syndrome (ARDS)\n              </Text>\n            }\n            {pf > 100 && pf <= 200 &&\n              <Text style={styles.assessment}>\n                Moderate Acute Respiratory Distress syndrome (ARDS)\n              </Text>\n            }\n            {pf <= 100 &&\n              <Text style={styles.assessment}>\n                Severe Acute Respiratory Distress syndrome (ARDS)\n              </Text>\n            }\n            <Text style={styles.assessment}>\n              OI = {score}\n            </Text>\n            {score < 4 &&\n              <Text style={styles.assessment}>\n                Severity: At risk for pediatric ARDS\n              </Text>\n            }\n            {score >= 4 && score < 8 &&\n              <Text style={styles.assessment}>\n                Severity: Mild pediatric ARDS\n              </Text>\n            }\n            {score >= 8 && score < 16 &&\n              <Text style={styles.assessment}>\n                Severity: Moderate pediatric ARDS\n              </Text>\n            }\n            {score >= 16 &&\n              <Text style={styles.assessment}>\n                Severity: severe pediatric ARDS\n              </Text>\n            }\n          </View>\n        </View>\n      )}\n      {c == 1 && (\n        <Pressable style={styles.submit}>\n          <Button\n            title=\"Add\"\n\n            onPress={onClickAdd}\n          >\n            Add\n          </Button>\n        </Pressable>)}\n    </SafeAreaView>\n  );\n};\nexport default OI;\n\nconst styles = StyleSheet.create({\n  prism: {\n    fontSize: 50,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n  },\n  assessment: {\n    marginTop: 20,\n    fontSize: 30,\n    fontWeight: \"bold\",\n  },\n  dropContainer: {\n    flexDirection: \"row\",\n    marginBottom: 20,\n    marginTop: 10,\n  },\n  dropdownContent: {\n    fontSize: 20,\n    marginTop: 10,\n  },\n  input: {\n    height: 40,\n    margin: 12,\n    borderWidth: 1,\n    padding: 10,\n    width: 200,\n  },\n  text: {\n    fontWeight: \"bold\",\n  },\n  container1: {\n    backgroundColor: \"#f0ffff\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  container2: {\n    backgroundColor: \"#fffacd\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  container3: {\n    backgroundColor: \"#ffb6c1\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  container4: {\n    backgroundColor: \"#f5f5dc\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  container5: {\n    backgroundColor: \"#dda0dd\",\n    paddingLeft: 20,\n    borderWidth: 2,\n    margin: 5,\n  },\n  subscore: {\n    fontWeight: \"bold\",\n    borderWidth: 1,\n    backgroundColor: \"#fff\",\n    margin: 10,\n    padding: 4,\n    fontSize: 20,\n  },\n  submit: {\n    borderWidth: 2,\n    backgroundColor: \"#56BF9C\",\n    margin: 10,\n    padding: 7,\n    width: 90,\n  }\n});\n"]},"metadata":{},"sourceType":"module"}
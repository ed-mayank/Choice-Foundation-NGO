{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import React,{useContext,useEffect,useState}from'react';import{useNavigate}from\"react-router-dom\";import Alert from\"react-native-web/dist/exports/Alert\";import Button from\"react-native-web/dist/exports/Button\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Modal from\"react-native-web/dist/exports/Modal\";import Text from\"react-native-web/dist/exports/Text\";import Pressable from\"react-native-web/dist/exports/Pressable\";import View from\"react-native-web/dist/exports/View\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Icon from\"@expo/vector-icons/FontAwesome\";import ReviewDetails from\"./ReviewDetails\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Maindashboard=function Maindashboard(props){var initialPatients=[];var _useState=useState(initialPatients),_useState2=_slicedToArray(_useState,2),patient_List=_useState2[0],setPatient_List=_useState2[1];var _useState3=useState(initialPatients),_useState4=_slicedToArray(_useState3,2),patients=_useState4[0],setPatients=_useState4[1];var patientsList=function patientsList(){var result,data,p_list;return _regeneratorRuntime.async(function patientsList$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(fetch('https://devapi.igzolt.in/index.php/Api/ip_patients_list1',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"start\":\"1\",\"limit\":\"20\",\"ser_hospitalid\":\"3\",\"sear_umr_no\":\"\",\"sear_ip_no\":\"\",\"sear_patient\":\"\",\"sear_admission_date\":\"\",\"sear_consult_doctor\":\"\",\"sear_sponser\":\"\",\"admission_date_order\":\"\",\"doctor_name_order\":\"\",\"ipno_order\":\"\",\"sponser_order\":\"\",\"sear_ptmid\":\"\"})}));case 2:result=_context.sent;_context.next=5;return _regeneratorRuntime.awrap(result.json());case 5:data=_context.sent;p_list=data.data;setPatients(p_list);setPatient_List(p_list);case 9:case\"end\":return _context.stop();}}},null,null,null,Promise);};useEffect(function(){if(localStorage.getItem('user_data')==null){alert(\"Unauthorised Access\");navigate(\"/\");}console.log(\"api\");patientsList();},[]);var navigate=useNavigate();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalVisible=_useState6[0],setModalVisible=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],onChangeName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),gender=_useState10[0],onChangeGender=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),patientIp=_useState12[0],onChangePatientIp=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),date=_useState14[0],onChangeDate=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),time=_useState16[0],onChangeTime=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),open=_useState18[0],setOpen=_useState18[1];var resetInputs=function resetInputs(){onChangeName(\"\");onChangeGender(\"\");onChangePatientIp(\"\");onChangeDate(\"\");onChangeTime(\"\");};var addPatient=function addPatient(patientName,gender,patientID,createDateTime,emailId,address,city,stateCountry,pincode,country,status,title){var response,data;return _regeneratorRuntime.async(function addPatient$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(JSON.stringify({patientName:patientName,gender:gender,age:age,patientID:patientID,createDateTime:createDateTime,emailId:emailId,address:address,city:city,stateCountry:stateCountry,pincode:pincode,country:country,status:status,title:title}));_context2.next=3;return _regeneratorRuntime.awrap(fetch('https://devapi.igzolt.in/index.php/v1/patient/registerPatient',{mode:'cors',method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({patientName:patientName,gender:gender,patientID:patientID,createDateTime:createDateTime,emailId:emailId,address:address,city:city,stateCountry:stateCountry,pincode:pincode,country:country,status:status,title:title})}).catch(function(e){console.log(e);}));case 3:response=_context2.sent;_context2.next=6;return _regeneratorRuntime.awrap(response.json());case 6:data=_context2.sent;console.log(data);case 8:case\"end\":return _context2.stop();}}},null,null,null,Promise);};var onSubmit=function onSubmit(event){setModalVisible(!modalVisible);event.preventDefault();var newPatient={patientName:name,gender:gender,patientID:patientIp,createDateTime:date+\" \"+time,address:\"\",emailId:\"\",city:\"\",stateCountry:\"\",pincode:\"\",country:\"INDIA\",status:\"\",title:\"\"};console.log(newPatient);addPatient(newPatient.patientName,newPatient.gender,newPatient.patientID,newPatient.createDateTime,newPatient.address,newPatient.emailId,newPatient.city,newPatient.stateCountry,newPatient.pincode,newPatient.country,newPatient.status,newPatient.title);resetInputs();};var _useState19=useState(patients),_useState20=_slicedToArray(_useState19,2),searchData=_useState20[0],setSearchData=_useState20[1];var searchItem=function searchItem(query){if(!query){setPatients(patient_List);return;}var finalResult=[];patient_List.forEach(function(item){if(item.P_ID.indexOf(query)!==-1){finalResult.push(item);}});setPatients(finalResult);};return _jsxs(SafeAreaView,{children:[_jsx(Modal,{animationType:\"fade\",transparent:true,visible:modalVisible,children:_jsxs(View,{style:styles.centeredView,children:[_jsx(Text,{children:\"Patient Name\"}),_jsx(TextInput,{style:styles.input,onChangeText:onChangeName,value:name,placeholder:\"Patient Name\",keyboardType:\"ascii-capable\"}),_jsx(Text,{children:\"Gender\"}),_jsx(TextInput,{style:styles.input,onChangeText:onChangeGender,value:gender,placeholder:\"Gender\",keyboardType:\"ascii-capable\"}),_jsx(Text,{children:\"Patient IP\"}),_jsx(TextInput,{style:styles.input,onChangeText:onChangePatientIp,value:patientIp,placeholder:\"Patient IP\",keyboardType:\"ascii-capable\"}),_jsx(Text,{children:\"Time of Admission(YYYY-MM-DD)\"}),_jsx(TextInput,{style:styles.input,format:\"DD-MM-YYYY\",onChangeText:onChangeDate,value:date,placeholder:\"Date of Admission(YYYY-MM-DD)\",keyboardType:\"decimal-pad\"}),_jsx(Text,{children:\"Time of Admission(HH:MM:SS)\"}),_jsx(TextInput,{style:styles.input,onChangeText:onChangeTime,value:time,placeholder:\"Time of Admission\",keyboardType:\"decimal-pad\"}),_jsxs(View,{style:styles.container1,children:[_jsx(Pressable,{children:_jsx(Icon.Button,{style:styles.buttonOpen,onPress:onSubmit,children:\"Register\"})}),_jsx(Pressable,{children:_jsx(Icon.Button,{style:styles.buttonOpen,onPress:function onPress(){return setModalVisible(false);},children:\"Cancel\"})})]})]})}),_jsx(View,{style:styles.container,children:_jsx(Text,{children:_jsx(Pressable,{children:_jsx(Icon.Button,{name:\"plus\",style:styles.buttonOpen,onPress:function onPress(){return setModalVisible(true);},children:\"Add New Patient\"})})})}),_jsx(View,{style:styles.container,children:_jsxs(View,{style:styles.container1,children:[_jsx(Icon,{style:styles.searchIcon,name:\"search\",size:20,color:\"#56BF9C\"}),_jsx(TextInput,{inlineImageLeft:\"search_icon\",style:styles.buttonfuzzySearch,type:\"search\",placeholder:\"  Search Patient By ID\",onChange:function onChange(e){return searchItem(e.target.value);}})]})}),patients.map(function(patient){return _jsx(ReviewDetails,{patient:patient},patient.P_ID);})]});};var styles=StyleSheet.create({container:{flex:1,flexDirection:'row',justifyContent:'space-between',paddingTop:5,paddingBottom:5},container1:{flex:1,flexDirection:'row'},centeredView:{flex:1,margin:50,backgroundColor:\"white\",borderRadius:20,padding:15,alignItems:\"center\",justifyContent:\"center\",shadowColor:\"#000\",shadowOffset:{width:0,height:5},shadowOpacity:0.75,shadowRadius:4,elevation:15},modalView:{margin:20,backgroundColor:\"white\",borderRadius:20,padding:35,alignItems:\"center\",shadowColor:\"#000\",shadowOffset:{width:0,height:2},shadowOpacity:0.25,shadowRadius:4,elevation:5},buttonOpen:{backgroundColor:\"#56BF9C\"},buttonOpen1:{backgroundColor:\"#56BF9C\",padding:4},input:{height:40,margin:12,borderWidth:1,padding:5},buttonfuzzySearch:{borderWidth:2,borderRadius:8,borderColor:\"#56BF9C\",strokeWidth:\"1\"},searchIcon:{padding:5}});export default Maindashboard;","map":{"version":3,"sources":["/home/mayank/DASS/DASS2K22-Team-48/src/Frontend/components/Maindashboard.js"],"names":["React","useContext","useEffect","useState","useNavigate","Icon","ReviewDetails","Maindashboard","props","initialPatients","patient_List","setPatient_List","patients","setPatients","patientsList","fetch","method","headers","body","JSON","stringify","result","json","data","p_list","localStorage","getItem","alert","navigate","console","log","modalVisible","setModalVisible","name","onChangeName","gender","onChangeGender","patientIp","onChangePatientIp","date","onChangeDate","time","onChangeTime","open","setOpen","resetInputs","addPatient","patientName","patientID","createDateTime","emailId","address","city","stateCountry","pincode","country","status","title","age","mode","catch","e","response","onSubmit","event","preventDefault","newPatient","searchData","setSearchData","searchItem","query","finalResult","forEach","item","P_ID","indexOf","push","styles","centeredView","input","container1","buttonOpen","container","searchIcon","buttonfuzzySearch","target","value","map","patient","StyleSheet","create","flex","flexDirection","justifyContent","paddingTop","paddingBottom","margin","backgroundColor","borderRadius","padding","alignItems","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","modalView","buttonOpen1","borderWidth","borderColor","strokeWidth"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport {\n    Alert,\n    Button,\n    ImageBackground,\n    StyleSheet,\n    Modal,\n    Text,\n    Pressable,\n    View,\n    SafeAreaView,\n    TextInput\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport ReviewDetails from './ReviewDetails';\n\n\nconst Maindashboard = (props) => {\n    // const context = useContext(PatientContext);\n    // const { patients, addPatient } = context;\n    const initialPatients = [];\n    // const patient_List = [];\n    const [patient_List, setPatient_List] = useState(initialPatients);\n    const [patients, setPatients] = useState(initialPatients);\n    const patientsList = async () => {\n        const result = await fetch('https://devapi.igzolt.in/index.php/Api/ip_patients_list1',\n            {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    \"start\": \"1\",\n                    \"limit\": \"20\",\n                    \"ser_hospitalid\": \"3\",\n                    \"sear_umr_no\": \"\",\n                    \"sear_ip_no\": \"\",\n                    \"sear_patient\": \"\",\n                    \"sear_admission_date\": \"\",\n                    \"sear_consult_doctor\": \"\",\n                    \"sear_sponser\": \"\",\n                    \"admission_date_order\": \"\",\n                    \"doctor_name_order\": \"\",\n                    \"ipno_order\": \"\",\n                    \"sponser_order\": \"\",\n                    \"sear_ptmid\": \"\"\n                })\n            })\n        const data = await result.json();\n        const p_list = data.data\n        setPatients(p_list);\n        setPatient_List(p_list);\n    }\n    useEffect(() => {\n        if (localStorage.getItem('user_data') == null) {\n            alert(\"Unauthorised Access\")\n            navigate(\"/\")\n        }\n        console.log(\"api\")\n        patientsList();\n    }, []);\n\n    const navigate = useNavigate();\n\n    const [modalVisible, setModalVisible] = useState(false);\n    const [name, onChangeName] = useState(\"\");\n    // const [age, onChangeAge] = useState(\"\")\n    const [gender, onChangeGender] = useState(\"\")\n    const [patientIp, onChangePatientIp] = useState(\"\")\n    const [date, onChangeDate] = useState(\"\");\n    const [time, onChangeTime] = useState(\"\");\n    const [open, setOpen] = useState(false);\n\n    const resetInputs = () => {\n        onChangeName(\"\");\n        // onChangeAge(\"\");\n        onChangeGender(\"\");\n        onChangePatientIp(\"\");\n        onChangeDate(\"\");\n        onChangeTime(\"\");\n    };\n\n    const addPatient = async (patientName, gender, patientID,\n        createDateTime, emailId, address, city, stateCountry,\n        pincode, country, status, title) => {\n\n        console.log(JSON.stringify({\n            patientName, gender, age, patientID,\n            createDateTime, emailId, address, city, stateCountry,\n            pincode, country, status, title\n        }))\n        const response = await fetch('https://devapi.igzolt.in/index.php/v1/patient/registerPatient', {\n            mode: 'cors',\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                patientName, gender, patientID,\n                createDateTime, emailId, address, city, stateCountry,\n                pincode, country, status, title\n            })\n        }).catch((e) => {\n            console.log(e)\n        })\n        const data = await response.json();\n        console.log(data);\n    }\n\n    const onSubmit = (event) => {\n        setModalVisible(!modalVisible)\n        event.preventDefault();\n\n        const newPatient = {\n            patientName: name,\n            // age: age,\n            gender: gender,\n            patientID: patientIp,\n            createDateTime: date + \" \" + time,\n            // date: date,\n            // time: time,\n            // createDateTime: \"2022-04-18 10:24:28\",\n\n            address: \"\",\n            emailId: \"\",\n            city: \"\",\n            stateCountry: \"\",\n            pincode: \"\",\n            country: \"INDIA\",\n            status: \"\",\n            title: \"\"\n\n            // createId: \"\",\n            // dateOfBirth: \"2015-04-17\",\n            // familyGroupId: \"\",\n            // familyGroupRegistration: \"\",\n            // identityIdNr: \"\",\n            // identityType: \"\",\n            // mobileNumber: 999999999,\n            // nextOfKin1Mobilenr: null,\n            // nextOfKin1Name: \"\",\n            // nextOfKin1Relation: \"\",\n            // nextOfKinMobilenr: 999999999,\n            // nextOfKinName: \"Ramu\",\n            // nextOfKinRelation: \"Father\",\n            // patientID: 0,\n            // firstName: \"\",\n            // lastName: \"\",\n            // permanentHomeAddress: \"\",\n            // regDate: \"2022-04-18\"\n\n        }\n        console.log(newPatient);\n\n        // post patient to backend\n        addPatient(\n            newPatient.patientName,\n            // newPatient.age,\n            newPatient.gender,\n            newPatient.patientID,\n            newPatient.createDateTime,\n            // newPatient.date,\n            // newPatient.time,\n            newPatient.address,\n\n            newPatient.emailId,\n\n            newPatient.city,\n            newPatient.stateCountry,\n            newPatient.pincode,\n            newPatient.country,\n            newPatient.status,\n            newPatient.title\n        );\n        resetInputs();\n    };\n\n    // for fuzzy search\n    const [searchData, setSearchData] = useState(patients);\n    const searchItem = (query) => {\n        if (!query) {\n            setPatients(patient_List);\n            return;\n        }\n        const finalResult = [];\n        patient_List.forEach((item) => {\n            if (\n                item.P_ID.indexOf(query) !== -1\n            ) {\n                finalResult.push(item);\n            }\n        });\n        setPatients(finalResult);\n    };\n\n    return (\n        <SafeAreaView >\n            <Modal\n                animationType=\"fade\"\n                transparent={true}\n                visible={modalVisible}\n            >\n                <View\n                    style={styles.centeredView}\n                >\n                    <Text>Patient Name</Text>\n                    <TextInput\n                        style={styles.input}\n                        onChangeText={onChangeName}\n                        value={name}\n                        placeholder=\"Patient Name\"\n                        keyboardType=\"ascii-capable\"\n                    />\n                    {/* <Text>Age</Text>\n                    <TextInput\n                        style={styles.input}\n                        onChangeText={onChangeAge}\n                        value={age}\n                        placeholder=\"Patient Age\"\n                        keyboardType=\"numeric\"\n                    /> */}\n                    <Text>Gender</Text>\n                    <TextInput\n                        style={styles.input}\n                        onChangeText={onChangeGender}\n                        value={gender}\n                        placeholder=\"Gender\"\n                        keyboardType=\"ascii-capable\"\n                    />\n                    <Text>Patient IP</Text>\n                    <TextInput\n                        style={styles.input}\n                        onChangeText={onChangePatientIp}\n                        value={patientIp}\n                        placeholder=\"Patient IP\"\n                        keyboardType=\"ascii-capable\"\n                    />\n                    <Text>Time of Admission(YYYY-MM-DD)</Text>\n                    <TextInput\n                        style={styles.input}\n                        format=\"DD-MM-YYYY\"\n                        onChangeText={onChangeDate}\n                        value={date}\n                        placeholder=\"Date of Admission(YYYY-MM-DD)\"\n                        keyboardType=\"decimal-pad\"\n                    />\n                    <Text>Time of Admission(HH:MM:SS)</Text>\n                    <TextInput\n                        style={styles.input}\n                        onChangeText={onChangeTime}\n                        value={time}\n                        placeholder=\"Time of Admission\"\n                        keyboardType=\"decimal-pad\"\n                    />\n                    <View style={styles.container1}>\n                        <Pressable>\n                            <Icon.Button\n                                // name=\"plus\"\n                                // title=\"submit\"\n                                style={styles.buttonOpen}\n                                onPress={onSubmit}\n                            >\n                                Register\n                            </Icon.Button>\n                        </Pressable>\n\n                        <Pressable>\n                            <Icon.Button\n                                // name=\"search\"\n                                // title=\"Cancel\"\n                                style={styles.buttonOpen}\n                                onPress={() => setModalVisible(false)}\n                            >\n                                Cancel\n                            </Icon.Button>\n                        </Pressable>\n                    </View>\n\n                </View>\n            </Modal >\n            <View style={styles.container}>\n                <Text>\n                    <Pressable>\n                        <Icon.Button\n                            name=\"plus\"\n                            style={styles.buttonOpen}\n                            onPress={() => setModalVisible(true)}\n                        >\n                            Add New Patient\n                        </Icon.Button>\n                    </Pressable>\n                </Text>\n\n            </View>\n            <View style={styles.container}>\n            <View style={styles.container1}>\n                <Icon\n                    style={styles.searchIcon}\n                    name=\"search\"\n                    size={20}\n                    color=\"#56BF9C\"\n                />\n                <TextInput\n                    inlineImageLeft='search_icon'\n                    style={styles.buttonfuzzySearch}\n                    type=\"search\"\n                    placeholder=\"  Search Patient By ID\"\n                    onChange={(e) => searchItem(e.target.value)}\n                />\n            </View>\n            </View>\n\n\n            {patients.map((patient) => {\n                return < ReviewDetails key={patient.P_ID} patient={patient} />\n            })\n            }\n        </SafeAreaView >\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        paddingTop: 5,\n        paddingBottom: 5,\n    },\n    container1: {\n        flex: 1,\n        flexDirection: 'row',\n        // justifyContent: 'flex-end',\n        // paddingTop: 5,\n        // paddingBottom: 5,\n    },\n    centeredView: {\n        flex: 1,\n        margin: 50,\n        backgroundColor: \"white\",\n        borderRadius: 20,\n        padding: 15,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        shadowColor: \"#000\",\n        shadowOffset: {\n            width: 0,\n            height: 5\n        },\n        shadowOpacity: 0.75,\n        shadowRadius: 4,\n        elevation: 15\n    },\n    modalView: {\n        margin: 20,\n        backgroundColor: \"white\",\n        borderRadius: 20,\n        padding: 35,\n        alignItems: \"center\",\n        shadowColor: \"#000\",\n        shadowOffset: {\n            width: 0,\n            height: 2\n        },\n        shadowOpacity: 0.25,\n        shadowRadius: 4,\n        elevation: 5\n    },\n    buttonOpen: {\n        backgroundColor: \"#56BF9C\",\n    },\n    buttonOpen1: {\n        backgroundColor: \"#56BF9C\",\n        padding: 4,\n        // borderRadius: 30\n    },\n    input: {\n        height: 40,\n        margin: 12,\n        borderWidth: 1,\n        padding: 5,\n    },\n    buttonfuzzySearch: {\n        borderWidth: 2,\n        borderRadius: 8,\n        borderColor: \"#56BF9C\",\n        strokeWidth: \"1\"\n    },\n    searchIcon: {\n        padding: 5\n    }\n});\n\nexport default Maindashboard;\n"]},"metadata":{},"sourceType":"module"}